{
  "stackName": "docker-registry",
  "clusterPrefix": "docker-registry-cp",
  "workerHostCount": 0,
  "dockerMachineWorkerOptions": {
    "engineLabel": "role=worker"
  },
  "dockerMachineMasterOptions": {
    "engineLabel": "role=master"
  },
  "dockerMachineDriverOptions": {
    "engineInsecureRegistry": "52.0.211.45:5000",
    "driver": "vmwarevsphere",
    "vmwarevsphereUsername": "root",
    "vmwarevspherePassword": "run2walk!",
    "vmwarevsphereCpuCount": 2,
    "vmwarevsphereDiskSize": 40000,
    "vmwarevsphereMemorySize": 4096,
    "vmwarevsphereVcenter": "vmware-rp.parrot.keyw"
  },
  "dockerComposeYaml": {
    "version": "3.6",
    "networks": {
      "net": null
    },
    "volumes": {
      "docker-registry-volume": null
    },
    "services": {
      "dns-bind": {
        "image": "52.0.211.45:5000/dns-bind:0.07.9",
        "environment": [
          "HOPE=SpringsEternal"
        ],
        "deploy": {
          "replicas": 1,
          "restart_policy": {
            "condition": "on-failure"
          },
          "placement": {
            "constraints": [
              "node.role == manager"
            ]
          },
          "labels": [
            "traefik.enable=false"
          ]
        },
        "ports": [
          "10000:10000",
          "53:53",
          "53:53/udp"
        ],
        "networks": [
          "net"
        ]
      },
      "docker-registry-frontend": {
        "image": "52.0.211.45:5000/docker-registry-frontend:0.07.9",
        "environment": [
          "ENV_DOCKER_REGISTRY_HOST=docker-registry",
          "ENV_DOCKER_REGISTRY_PORT=5000"
        ],
        "deploy": {
          "replicas": 1,
          "restart_policy": {
            "condition": "on-failure"
          },
          "placement": {
            "constraints": [
              "node.role == manager"
            ]
          },
          "labels": [
            "traefik.port=80",
            "traefik.backend=docker-registry-frontend",
            "traefik.frontend.rule=PathPrefixStrip: /docker-registry-frontend/"
          ]
        },
        "ports": [
          "5050:80"
        ],
        "networks": [
          "net"
        ]
      },
      "docker-registry": {
        "image": "52.0.211.45:5000/docker-registry:0.07.9",
        "environment": [
          "HOPE=SpringsEternal"
        ],
        "deploy": {
          "replicas": 1,
          "restart_policy": {
            "condition": "on-failure"
          },
          "placement": {
            "constraints": [
              "node.role == manager"
            ]
          },
          "labels": [
            "traefik.port=5000",
            "traefik.backend=docker-registry",
            "traefik.frontend.rule=PathPrefixStrip: /docker-registry/"
          ]
        },
        "ports": [
          "5000:5000"
        ],
        "volumes": [
          {
            "type": "volume",
            "source": "docker-registry-volume",
            "target": "/var/lib/registry",
            "volume": {
              "nocopy": true
            }
          }
        ],
        "networks": [
          "net"
        ]
      }
    }
  }
}

